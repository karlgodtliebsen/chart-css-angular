import { TestBed, waitForAsync } from '@angular/core/testing';
import { BrowserDynamicTestingModule } from '@angular/platform-browser-dynamic/testing';
import { setProps } from '../internals/query';
import * as customMatchers from '../matchers';
import { addMatchers } from '../core';
import { isType } from '../types';
import { initialSpectatorModule } from './initial-module';
import { getSpectatorDefaultOptions } from './options';
import { Spectator } from './spectator';
/**
 * @internal
 */
export function overrideComponentIfProviderOverridesSpecified(options) {
    const hasProviderOverrides = options.componentProviders.length || options.componentMocks.length;
    const hasViewProviders = options.componentViewProviders.length || options.componentViewProvidersMocks.length;
    if (hasProviderOverrides || hasViewProviders) {
        let providerConfiguration = {};
        if (hasProviderOverrides) {
            providerConfiguration = {
                providers: [...options.componentProviders, ...options.componentMocks.map(p => options.mockProvider(p))]
            };
        }
        if (hasViewProviders) {
            providerConfiguration = Object.assign(Object.assign({}, providerConfiguration), { viewProviders: [...options.componentViewProviders, ...options.componentViewProvidersMocks.map(p => options.mockProvider(p))] });
        }
        TestBed.overrideComponent(options.component, {
            set: providerConfiguration
        });
    }
}
/**
 * @internal
 */
export function overrideModules(options) {
    if (options.overrideModules.length) {
        options.overrideModules.forEach(overrideModule => {
            const [ngModule, override] = overrideModule;
            TestBed.overrideModule(ngModule, override);
        });
    }
}
/**
 * @publicApi
 */
export function createComponentFactory(typeOrOptions) {
    const options = isType(typeOrOptions)
        ? getSpectatorDefaultOptions({ component: typeOrOptions })
        : getSpectatorDefaultOptions(typeOrOptions);
    const moduleMetadata = initialSpectatorModule(options);
    beforeEach(waitForAsync(() => {
        addMatchers(customMatchers);
        TestBed.configureTestingModule(moduleMetadata).overrideModule(BrowserDynamicTestingModule, {
            set: {
                entryComponents: moduleMetadata.entryComponents
            }
        });
        overrideModules(options);
        overrideComponentIfProviderOverridesSpecified(options);
        TestBed.compileComponents();
    }));
    return (overrides) => {
        const defaults = { props: {}, detectChanges: true, providers: [] };
        const { detectChanges, props, providers } = Object.assign(Object.assign({}, defaults), overrides);
        if (providers && providers.length) {
            providers.forEach((provider) => {
                TestBed.overrideProvider(provider.provide, provider);
            });
        }
        const spectator = createSpectator(options, props);
        if (options.detectChanges && detectChanges) {
            spectator.detectChanges();
        }
        return spectator;
    };
}
function createSpectator(options, props) {
    const fixture = TestBed.createComponent(options.component);
    const debugElement = fixture.debugElement;
    const component = setProps(fixture.componentInstance, props);
    return new Spectator(fixture, debugElement, component, debugElement.nativeElement);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWZhY3RvcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zcGVjdGF0b3Ivc3JjL2xpYi9zcGVjdGF0b3IvY3JlYXRlLWZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUd4RixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUMsT0FBTyxLQUFLLGNBQWMsTUFBTSxhQUFhLENBQUM7QUFDOUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUN0QyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRWxDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzFELE9BQU8sRUFBRSwwQkFBMEIsRUFBb0IsTUFBTSxXQUFXLENBQUM7QUFDekUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQWV4Qzs7R0FFRztBQUNILE1BQU0sVUFBVSw2Q0FBNkMsQ0FBSSxPQUFzQztJQUNyRyxNQUFNLG9CQUFvQixHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7SUFDaEcsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsTUFBTSxJQUFJLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxNQUFNLENBQUM7SUFDN0csSUFBSSxvQkFBb0IsSUFBSSxnQkFBZ0IsRUFBRTtRQUM1QyxJQUFJLHFCQUFxQixHQUFHLEVBQUUsQ0FBQztRQUMvQixJQUFJLG9CQUFvQixFQUFFO1lBQ3hCLHFCQUFxQixHQUFHO2dCQUN0QixTQUFTLEVBQUUsQ0FBQyxH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QVMsQ0FBQztJQUNuQixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUksT0FBc0MsRUFBRSxLQUFrQjtJQUNwRixNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMzRCxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0lBRTFDLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFFN0QsT0FBTyxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDckYsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb3ZpZGVyLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUZXN0QmVkLCB3YWl0Rm9yQXN5bmMgfSBmcm9tICdAYW5ndWxhci9jb3JlL3Rlc3RpbmcnO1xuaW1wb3J0IHsgQnJvd3NlckR5bmFtaWNUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljL3Rlc3RpbmcnO1xuXG5pbXBvcnQgeyBCYXNlU3BlY3RhdG9yT3B0aW9ucywgQmFzZVNwZWN0YXRvck92ZXJyaWRlcyB9IGZyb20gJy4uL2Jhc2Uvb3B0aW9ucyc7XG5pbXBvcnQgeyBzZXRQcm9wcyB9IGZyb20gJy4uL2ludGVybmFscy9xdWVyeSc7XG5pbXBvcnQgKiBhcyBjdXN0b21NYXRjaGVycyBmcm9tICcuLi9tYXRjaGVycyc7XG5pbXBvcnQgeyBhZGRNYXRjaGVycyB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgaXNUeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBpbml0aWFsU3BlY3RhdG9yTW9kdWxlIH0gZnJvbSAnLi9pbml0aWFsLW1vZHVsZSc7XG5pbXBvcnQgeyBnZXRTcGVjdGF0b3JEZWZhdWx0T3B0aW9ucywgU3BlY3RhdG9yT3B0aW9ucyB9IGZyb20gJy4vb3B0aW9ucyc7XG5pbXBvcnQgeyBTcGVjdGF0b3IgfSBmcm9tICcuL3NwZWN0YXRvcic7XG5cbi8qKlxuICogQHB1YmxpY0FwaVxuICovXG5leHBvcnQgdHlwZSBTcGVjdGF0b3JGYWN0b3J5PEM+ID0gKG9wdGlvbnM/OiBTcGVjdGF0b3JPdmVycmlkZXM8Qz4pID0+IFNwZWN0YXRvcjxDPjtcblxuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3BlY3RhdG9yT3ZlcnJpZGVzPEM+IGV4dGVuZHMgQmFzZVNwZWN0YXRvck92ZXJyaWRlcyB7XG4gIGRldGVjdENoYW5nZXM/OiBib29sZWFuO1xuICBwcm9wcz86IFBhcnRpYWw8Qz47XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdmVycmlkZUNvbXBvbmVudElmUHJvdmlkZXJPdmVycmlkZXNTcGVjaWZpZWQ8Qz4ob3B0aW9uczogUmVxdWlyZWQ8U3BlY3RhdG9yT3B0aW9uczxDPj4pOiB2b2lkIHtcbiAgY29uc3QgaGFzUHJvdmlkZXJPdmVycmlkZXMgPSBvcHRpb25zLmNvbXBvbmVudFByb3ZpZGVycy5sZW5ndGggfHwgb3B0aW9ucy5jb21wb25lbnRNb2Nrcy5sZW5ndGg7XG4gIGNvbnN0IGhhc1ZpZXdQcm92aWRlcnMgPSBvcHRpb25zLmNvbXBvbmVudFZpZXdQcm92aWRlcnMubGVuZ3RoIHx8IG9wdGlvbnMuY29tcG9uZW50Vmlld1Byb3ZpZGVyc01vY2tzLmxlbmd0aDtcbiAgaWYgKGhhc1Byb3ZpZGVyT3ZlcnJpZGVzIHx8IGhhc1ZpZXdQcm92aWRlcnMpIHtcbiAgICBsZXQgcHJvdmlkZXJDb25maWd1cmF0aW9uID0ge307XG4gICAgaWYgKGhhc1Byb3ZpZGVyT3ZlcnJpZGVzKSB7XG4gICAgICBwcm92aWRlckNvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgIHByb3ZpZGVyczogWy4uLm9wdGlvbnMuY29tcG9uZW50UHJvdmlkZXJzLCAuLi5vcHRpb25zLmNvbXBvbmVudE1vY2tzLm1hcChwID0+IG9wdGlvbnMubW9ja1Byb3ZpZGVyKHApKV1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChoYXNWaWV3UHJvdmlkZXJzKSB7XG4gICAgICBwcm92aWRlckNvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgIC4uLnByb3ZpZGVyQ29uZmlndXJhdGlvbixcbiAgICAgICAgdmlld1Byb3ZpZGVyczogWy4uLm9wdGlvbnMuY29tcG9uZW50Vmlld1Byb3ZpZGVycywgLi4ub3B0aW9ucy5jb21wb25lbnRWaWV3UHJvdmlkZXJzTW9ja3MubWFwKHAgPT4gb3B0aW9ucy5tb2NrUHJvdmlkZXIocCkpXVxuICAgICAgfTtcbiAgICB9XG4gICAgVGVzdEJlZC5vdmVycmlkZUNvbXBvbmVudChvcHRpb25zLmNvbXBvbmVudCwge1xuICAgICAgc2V0OiBwcm92aWRlckNvbmZpZ3VyYXRpb25cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3ZlcnJpZGVNb2R1bGVzKG9wdGlvbnM6IFJlcXVpcmVkPEJhc2VTcGVjdGF0b3JPcHRpb25zPik6IHZvaWQge1xuICBpZiAob3B0aW9ucy5vdmVycmlkZU1vZHVsZXMubGVuZ3RoKSB7XG4gICAgb3B0aW9ucy5vdmVycmlkZU1vZHVsZXMuZm9yRWFjaChvdmVycmlkZU1vZHVsZSA9PiB7XG4gICAgICBjb25zdCBbbmdNb2R1bGUsIG92ZXJyaWRlXSA9IG92ZXJyaWRlTW9kdWxlO1xuXG4gICAgICBUZXN0QmVkLm92ZXJyaWRlTW9kdWxlKG5nTW9kdWxlLCBvdmVycmlkZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRGYWN0b3J5PEM+KHR5cGVPck9wdGlvbnM6IFR5cGU8Qz4gfCBTcGVjdGF0b3JPcHRpb25zPEM+KTogU3BlY3RhdG9yRmFjdG9yeTxDPiB7XG4gIGNvbnN0IG9wdGlvbnMgPSBpc1R5cGUodHlwZU9yT3B0aW9ucylcbiAgICA/IGdldFNwZWN0YXRvckRlZmF1bHRPcHRpb25zPEM+KHsgY29tcG9uZW50OiB0eXBlT3JPcHRpb25zIH0pXG4gICAgOiBnZXRTcGVjdGF0b3JEZWZhdWx0T3B0aW9ucyh0eXBlT3JPcHRpb25zKTtcblxuICBjb25zdCBtb2R1bGVNZXRhZGF0YSA9IGluaXRpYWxTcGVjdGF0b3JNb2R1bGU8Qz4ob3B0aW9ucyk7XG5cbiAgYmVmb3JlRWFjaChcbiAgICB3YWl0Rm9yQXN5bmMoKCkgPT4ge1xuICAgICAgYWRkTWF0Y2hlcnMoY3VzdG9tTWF0Y2hlcnMpO1xuICAgICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKG1vZHVsZU1ldGFkYXRhKS5vdmVycmlkZU1vZHVsZShCcm93c2VyRHluYW1pY1Rlc3RpbmdNb2R1bGUsIHtcbiAgICAgICAgc2V0OiB7XG4gICAgICAgICAgZW50cnlDb21wb25lbnRzOiBtb2R1bGVNZXRhZGF0YS5lbnRyeUNvbXBvbmVudHNcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG92ZXJyaWRlTW9kdWxlcyhvcHRpb25zKTtcblxuICAgICAgb3ZlcnJpZGVDb21wb25lbnRJZlByb3ZpZGVyT3ZlcnJpZGVzU3BlY2lmaWVkKG9wdGlvbnMpO1xuXG4gICAgICBUZXN0QmVkLmNvbXBpbGVDb21wb25lbnRzKCk7XG4gICAgfSlcbiAgKTtcblxuICByZXR1cm4gKG92ZXJyaWRlcz86IFNwZWN0YXRvck92ZXJyaWRlczxDPikgPT4ge1xuICAgIGNvbnN0IGRlZmF1bHRzOiBTcGVjdGF0b3JPdmVycmlkZXM8Qz4gPSB7IHByb3BzOiB7fSwgZGV0ZWN0Q2hhbmdlczogdHJ1ZSwgcHJvdmlkZXJzOiBbXSB9O1xuICAgIGNvbnN0IHsgZGV0ZWN0Q2hhbmdlcywgcHJvcHMsIHByb3ZpZGVycyB9ID0geyAuLi5kZWZhdWx0cywgLi4ub3ZlcnJpZGVzIH07XG5cbiAgICBpZiAocHJvdmlkZXJzICYmIHByb3ZpZGVycy5sZW5ndGgpIHtcbiAgICAgIHByb3ZpZGVycy5mb3JFYWNoKChwcm92aWRlcjogUHJvdmlkZXIpID0+IHtcbiAgICAgICAgVGVzdEJlZC5vdmVycmlkZVByb3ZpZGVyKChwcm92aWRlciBhcyBhbnkpLnByb3ZpZGUsIHByb3ZpZGVyIGFzIGFueSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzcGVjdGF0b3IgPSBjcmVhdGVTcGVjdGF0b3Iob3B0aW9ucywgcHJvcHMpO1xuXG4gICAgaWYgKG9wdGlvbnMuZGV0ZWN0Q2hhbmdlcyAmJiBkZXRlY3RDaGFuZ2VzKSB7XG4gICAgICBzcGVjdGF0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cblxuICAgIHJldHVybiBzcGVjdGF0b3I7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNwZWN0YXRvcjxDPihvcHRpb25zOiBSZXF1aXJlZDxTcGVjdGF0b3JPcHRpb25zPEM+PiwgcHJvcHM/OiBQYXJ0aWFsPEM+KTogU3BlY3RhdG9yPEM+IHtcbiAgY29uc3QgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KG9wdGlvbnMuY29tcG9uZW50KTtcbiAgY29uc3QgZGVidWdFbGVtZW50ID0gZml4dHVyZS5kZWJ1Z0VsZW1lbnQ7XG5cbiAgY29uc3QgY29tcG9uZW50ID0gc2V0UHJvcHMoZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZSwgcHJvcHMpO1xuXG4gIHJldHVybiBuZXcgU3BlY3RhdG9yKGZpeHR1cmUsIGRlYnVnRWxlbWVudCwgY29tcG9uZW50LCBkZWJ1Z0VsZW1lbnQubmF0aXZlRWxlbWVudCk7XG59XG4iXX0=