import { Spectator } from '../spectator/spectator';
import { isRouterStub } from './router-stub';
/**
 * @publicApi
 */
export class SpectatorRouting extends Spectator {
    constructor(fixture, debugElement, instance, router, activatedRouteStub) {
        super(fixture, debugElement, instance, debugElement.nativeElement);
        this.router = router;
        this.activatedRouteStub = activatedRouteStub;
    }
    /**
     * Simulates a route navigation by updating the Params, QueryParams and Data observable streams.
     */
    triggerNavigation(options) {
        if (!this.checkStubPresent()) {
            return;
        }
        if (options && options.params) {
            this.activatedRouteStub.setParams(options.params);
        }
        if (options && options.queryParams) {
            this.activatedRouteStub.setQueryParams(options.queryParams);
        }
        if (options && options.data) {
            this.activatedRouteStub.setAllData(options.data);
        }
        if (options && options.fragment) {
            this.activatedRouteStub.setFragment(options.fragment);
        }
        this.triggerNavigationAndUpdate();
    }
    /**
     * Updates the route params and triggers a route navigation.
     */
    setRouteParam(name, value) {
        if (this.checkStubPresent()) {
            this.activatedRouteStub.setParam(name, value);
            this.triggerNavigationAndUpdate();
        }
    }
    /**
     * Updates the route query params and triggers a route navigation.
     */
    setRouteQueryParam(name, value) {
        if (this.checkStubPresent()) {
            this.activatedRouteStub.setQueryParam(name, value);
            this.triggerNavigationAndUpdate();
        }
    }
    /**
     * Updates the route data and triggers a route navigation.
     */
    setRouteData(name, value) {
        if (this.checkStubPresent()) {
            this.activatedRouteStub.setData(name, value);
            this.triggerNavigationAndUpdate();
        }
    }
    /**
     * Updates the route fragment and triggers a route navigation.
     */
    setRouteFragment(fragment) {
        if (this.checkStubPresent()) {
            this.activatedRouteStub.setFragment(fragment);
            this.triggerNavigationAndUpdate();
        }
    }
    /**
     * Updates the route url and triggers a route navigation.
     */
    setRouteUrl(url) {
        if (this.checkStubPresent()) {
            this.activatedRouteStub.setUrl(url);
            this.triggerNavigationAndUpdate();
        }
    }
    /**
     * Emits a router event
     */
    emitRouterEvent(event) {
        if (!isRouterStub(this.router)) {
            // tslint:disable-next-line:no-console
            console.warn('No stub for Router present. Set Spectator option "stubsEnabled" to true if you want to use this ' +
                'helper, or use Router navigation to trigger events.');
            return;
        }
        this.router.emitRouterEvent(event);
    }
    triggerNavigationAndUpdate() {
        this.activatedRouteStub.triggerNavigation();
        this.detectChanges();
    }
    checkStubPresent() {
        if (!this.activatedRouteStub) {
            // tslint:disable-next-line:no-console
            console.warn('No stub for ActivatedRoute present. Set Spectator option "stubsEnabled" to true if you want to use this ' +
                'helper, or use Router to trigger navigation.');
            return false;
        }
        return true;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlY3RhdG9yLXJvdXRpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zcGVjdGF0b3Ivc3JjL2xpYi9zcGVjdGF0b3Itcm91dGluZy9zcGVjdGF0b3Itcm91dGluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFJbkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU3Qzs7R0FFRztBQUNILE1BQU0sT0FBTyxnQkFBb0IsU0FBUSxTQUFZO0lBQ25ELFlBQ0UsT0FBOEIsRUFDOUIsWUFBMEIsRUFDMUIsUUFBVyxFQUNLLE1BQWMsRUFDZCxrQkFBdUM7UUFFdkQsS0FBSyxDQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUhuRCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFxQjtJQUd6RCxDQUFDO0lBRUQ7O09BRUc7SUFDSSxpQkFBaUIsQ0FBQyxPQUFzQjtRQUM3QyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDNUIsT0FBTztTQUNSO1FBRUQsSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRTtZQUM3QixJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUU7WUFDbEMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDN0Q7UUFFRCxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO1lBQzNCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xEO1FBRUQsSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRTtZQUMvQixJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN2RDtRQUVELElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFFRDs7T0FFRztJQUNJLGFBQWEsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUM5QyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1lBQzNCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ksa0JBQWtCLENBQUMsSUFBWSxFQUFFLEtBQWE7UUFDbkQsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtZQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztTQUNuQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLFlBQVksQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUM3QyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1lBQzNCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzdDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ksZ0JBQWdCLENBQUMsUUFBdUI7UUFDN0MsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRTtZQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQztJQUVEOztPQUVHO0lBQ0ksV0FBVyxDQUFDLEdBQWlCO1FBQ2xDLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQUU7WUFDM0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNwQyxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztTQUNuQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLGVBQWUsQ0FBQyxLQUFZO1FBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQzlCLHNDQUFzQztZQUN0QyxPQUFPLENBQUMsSUFBSSxDQUNWLGtHQUFrRztnQkFDaEcscURBQXFELENBQ3hELENBQUM7WUFFRixPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU8sMEJBQTBCO1FBQ2hDLElBQUksQ0FBQyxrQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzdDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRU8sZ0JBQWdCO1FBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDNUIsc0NBQXNDO1lBQ3RDLE9BQU8sQ0FBQyxJQUFJLENBQ1YsMEdBQTBHO2dCQUN4Ryw4Q0FBOEMsQ0FDakQsQ0FBQztZQUVGLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnRWxlbWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XG5pbXBvcnQgeyBFdmVudCwgUm91dGVyLCBVcmxTZWdtZW50IH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgU3BlY3RhdG9yIH0gZnJvbSAnLi4vc3BlY3RhdG9yL3NwZWN0YXRvcic7XG5cbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlU3R1YiB9IGZyb20gJy4vYWN0aXZhdGVkLXJvdXRlLXN0dWInO1xuaW1wb3J0IHsgUm91dGVPcHRpb25zIH0gZnJvbSAnLi9yb3V0ZS1vcHRpb25zJztcbmltcG9ydCB7IGlzUm91dGVyU3R1YiB9IGZyb20gJy4vcm91dGVyLXN0dWInO1xuXG4vKipcbiAqIEBwdWJsaWNBcGlcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWN0YXRvclJvdXRpbmc8Qz4gZXh0ZW5kcyBTcGVjdGF0b3I8Qz4ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPGFueT4sXG4gICAgZGVidWdFbGVtZW50OiBEZWJ1Z0VsZW1lbnQsXG4gICAgaW5zdGFuY2U6IEMsXG4gICAgcHVibGljIHJlYWRvbmx5IHJvdXRlcjogUm91dGVyLFxuICAgIHB1YmxpYyByZWFkb25seSBhY3RpdmF0ZWRSb3V0ZVN0dWI/OiBBY3RpdmF0ZWRSb3V0ZVN0dWJcbiAgKSB7XG4gICAgc3VwZXIoZml4dHVyZSwgZGVidWdFbGVtZW50LCBpbnN0YW5jZSwgZGVidWdFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpbXVsYXRlcyBhIHJvdXRlIG5hdmlnYXRpb24gYnkgdXBkYXRpbmcgdGhlIFBhcmFtcywgUXVlcnlQYXJhbXMgYW5kIERhdGEgb2JzZXJ2YWJsZSBzdHJlYW1zLlxuICAgKi9cbiAgcHVibGljIHRyaWdnZXJOYXZpZ2F0aW9uKG9wdGlvbnM/OiBSb3V0ZU9wdGlvbnMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2hlY2tTdHViUHJlc2VudCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXJhbXMpIHtcbiAgICAgIHRoaXMuYWN0aXZhdGVkUm91dGVTdHViLnNldFBhcmFtcyhvcHRpb25zLnBhcmFtcyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5xdWVyeVBhcmFtcykge1xuICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZVN0dWIuc2V0UXVlcnlQYXJhbXMob3B0aW9ucy5xdWVyeVBhcmFtcyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhKSB7XG4gICAgICB0aGlzLmFjdGl2YXRlZFJvdXRlU3R1Yi5zZXRBbGxEYXRhKG9wdGlvbnMuZGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5mcmFnbWVudCkge1xuICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZVN0dWIuc2V0RnJhZ21lbnQob3B0aW9ucy5mcmFnbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyTmF2aWdhdGlvbkFuZFVwZGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJvdXRlIHBhcmFtcyBhbmQgdHJpZ2dlcnMgYSByb3V0ZSBuYXZpZ2F0aW9uLlxuICAgKi9cbiAgcHVibGljIHNldFJvdXRlUGFyYW0obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2hlY2tTdHViUHJlc2VudCgpKSB7XG4gICAgICB0aGlzLmFjdGl2YXRlZFJvdXRlU3R1Yi5zZXRQYXJhbShuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLnRyaWdnZXJOYXZpZ2F0aW9uQW5kVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJvdXRlIHF1ZXJ5IHBhcmFtcyBhbmQgdHJpZ2dlcnMgYSByb3V0ZSBuYXZpZ2F0aW9uLlxuICAgKi9cbiAgcHVibGljIHNldFJvdXRlUXVlcnlQYXJhbShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jaGVja1N0dWJQcmVzZW50KCkpIHtcbiAgICAgIHRoaXMuYWN0aXZhdGVkUm91dGVTdHViLnNldFF1ZXJ5UGFyYW0obmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy50cmlnZ2VyTmF2aWdhdGlvbkFuZFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSByb3V0ZSBkYXRhIGFuZCB0cmlnZ2VycyBhIHJvdXRlIG5hdmlnYXRpb24uXG4gICAqL1xuICBwdWJsaWMgc2V0Um91dGVEYXRhKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoZWNrU3R1YlByZXNlbnQoKSkge1xuICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZVN0dWIuc2V0RGF0YShuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLnRyaWdnZXJOYXZpZ2F0aW9uQW5kVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJvdXRlIGZyYWdtZW50IGFuZCB0cmlnZ2VycyBhIHJvdXRlIG5hdmlnYXRpb24uXG4gICAqL1xuICBwdWJsaWMgc2V0Um91dGVGcmFnbWVudChmcmFnbWVudDogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoZWNrU3R1YlByZXNlbnQoKSkge1xuICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZVN0dWIuc2V0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgdGhpcy50cmlnZ2VyTmF2aWdhdGlvbkFuZFVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSByb3V0ZSB1cmwgYW5kIHRyaWdnZXJzIGEgcm91dGUgbmF2aWdhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzZXRSb3V0ZVVybCh1cmw6IFVybFNlZ21lbnRbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNoZWNrU3R1YlByZXNlbnQoKSkge1xuICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZVN0dWIuc2V0VXJsKHVybCk7XG4gICAgICB0aGlzLnRyaWdnZXJOYXZpZ2F0aW9uQW5kVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVtaXRzIGEgcm91dGVyIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgZW1pdFJvdXRlckV2ZW50KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICghaXNSb3V0ZXJTdHViKHRoaXMucm91dGVyKSkge1xuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ05vIHN0dWIgZm9yIFJvdXRlciBwcmVzZW50LiBTZXQgU3BlY3RhdG9yIG9wdGlvbiBcInN0dWJzRW5hYmxlZFwiIHRvIHRydWUgaWYgeW91IHdhbnQgdG8gdXNlIHRoaXMgJyArXG4gICAgICAgICAgJ2hlbHBlciwgb3IgdXNlIFJvdXRlciBuYXZpZ2F0aW9uIHRvIHRyaWdnZXIgZXZlbnRzLidcbiAgICAgICk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJvdXRlci5lbWl0Um91dGVyRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmlnZ2VyTmF2aWdhdGlvbkFuZFVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2YXRlZFJvdXRlU3R1YiEudHJpZ2dlck5hdmlnYXRpb24oKTtcbiAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tTdHViUHJlc2VudCgpOiB0aGlzIGlzIHsgcmVhZG9ubHkgYWN0aXZhdGVkUm91dGVTdHViOiBBY3RpdmF0ZWRSb3V0ZVN0dWIgfSB7XG4gICAgaWYgKCF0aGlzLmFjdGl2YXRlZFJvdXRlU3R1Yikge1xuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ05vIHN0dWIgZm9yIEFjdGl2YXRlZFJvdXRlIHByZXNlbnQuIFNldCBTcGVjdGF0b3Igb3B0aW9uIFwic3R1YnNFbmFibGVkXCIgdG8gdHJ1ZSBpZiB5b3Ugd2FudCB0byB1c2UgdGhpcyAnICtcbiAgICAgICAgICAnaGVscGVyLCBvciB1c2UgUm91dGVyIHRvIHRyaWdnZXIgbmF2aWdhdGlvbi4nXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiJdfQ==